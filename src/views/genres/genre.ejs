<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/head') %>
  <body>
    <%- include('../partials/nav') %>

    <p><%= genre.name %> games:</p>

    <a href="/genres/<%= genre.genre_id %>/edit">Edit</a>

    <form
      method="POST"
      action="/genres/<%= genre.genre_id %>/delete"
      style="display: inline"
    >
      <button
        type="submit"
        onclick="return confirm('Are you sure you want to delete this genre?')"
      >
        Delete
      </button>
    </form>

    <% if (games && games.length > 0) { %> <% games.forEach(game => { %>
    <p>
      <%= game.title %> | <%= game.released %> | <%= game.genre %> | <% const
      validPlatforms = game.platforms.filter(platform => platform !== null); if
      (validPlatforms.length === 0) { %> Undefined platform <% } else {
      validPlatforms.forEach((platform, index) => { %><%= platform %><%= index <
      validPlatforms.length - 1 ? ' / ' : '' %><% }) } %>
    </p>
    <% }) %> <% } else { %>
    <p>No games found for this genre.</p>
    <% } %> <%- include('../partials/goBack') %>

    <!-- <%- include('../partials/footer') %> -->
  </body>
</html>
